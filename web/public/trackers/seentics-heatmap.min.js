!function(e,t){"use strict";var n=e!==e.top;if(e.SEENTICS_CORE)i();else var a=setInterval(function(){e.SEENTICS_CORE&&(clearInterval(a),i())},100);function i(){var a=e.SEENTICS_CORE.config,i={buffer:[],maxBufferSize:100,flushInterval:3e4,lastMoveTime:0,moveThreshold:150,lastMoveX:-1,lastMoveY:-1,minMoveDistance:1,lastUrl:e.location.href,samplingRate:.1,enabled:!1!==a.heatmap_enabled},o=e.location.pathname,l=a.max_heatmaps||0,r=a.tracked_urls||[],s=r.includes(o);if(i.enabled&&l>0&&!s&&r.length>=l&&(i.enabled=!1),i.enabled||n){n||r.includes(o)||r.push(o);var f=function(){var n=t.documentElement,a=t.body||{scrollHeight:0,offsetHeight:0,clientWidth:0},i=a.getBoundingClientRect?a.getBoundingClientRect():{width:n.clientWidth,left:0};return{width:i.width||n.clientWidth||e.innerWidth,left:i.left+(e.pageXOffset||n.scrollLeft),height:Math.max(a.scrollHeight||0,n.scrollHeight,a.offsetHeight||0,n.offsetHeight,n.clientHeight)}},c=function(){var t=e.innerWidth;return t<768?"mobile":t<1024?"tablet":"desktop"},d=function(e){var t,n=f(),a=n.width||1,i=n.height||1,o=c();if("desktop"===o||"tablet"===o){var l="desktop"===o?1200:768;t=(l/2+(e.pageX-(n.left+a/2)))/l*1e3}else t=(e.pageX-n.left)/a*1e3;return{x:t,y:Math.min(1e3,Math.max(0,e.pageY/i*1e3))}},h=function(e){return e?e.length>1&&e.endsWith("/")?e.slice(0,-1):e:"/"},p=function(t,n,a,o){i.enabled&&(i.buffer.push({type:t,x:n,y:a,selector:o||"",url:h(e.location.pathname),device_type:c(),timestamp:Math.floor(Date.now()/1e3)}),i.buffer.length>=i.maxBufferSize&&u())},u=function(){if(0!==i.buffer.length){var e=i.buffer.slice();i.buffer=[],fetch(a.apiHost+"/api/v1/heatmaps/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({website_id:a.websiteId,points:e})}).catch(function(e){a.debug&&console.error("[Seentics Heatmap]",e)})}};if(e.addEventListener("message",function(n){if("SEENTICS_GET_DIMENSIONS"===n.data){var a=f(),i=a.height,o=a.width;if(i<=e.innerHeight+100)try{for(var l=t.querySelectorAll("div, main, section"),r=0;r<l.length;r++){var s=l[r];if(s.scrollHeight>i&&s.scrollHeight<1e4){var c=e.getComputedStyle(s);"auto"!==c.overflowY&&"scroll"!==c.overflowY||"none"===c.display||(i=s.scrollHeight,s.scrollWidth>o&&(o=s.scrollWidth))}}}catch(e){}n.source.postMessage({type:"SEENTICS_DIMENSIONS",height:i,width:a.width,left:a.left-(e.pageXOffset||t.documentElement.scrollLeft),totalWidth:a.width,url:e.location.href},"*")}n.data&&"SEENTICS_SET_SCROLL"===n.data.type&&e.scrollTo(n.data.left||0,n.data.top||0)}),e.addEventListener("scroll",function(){e.parent!==e&&e.parent.postMessage({type:"SEENTICS_SCROLL",scrollTop:e.pageYOffset||t.documentElement.scrollTop,scrollLeft:e.pageXOffset||t.documentElement.scrollLeft},"*")},{passive:!0}),!n){p("pageview",0,0),t.addEventListener("mousemove",function(e){var t=Date.now();if(!(t-i.lastMoveTime<i.moveThreshold||Math.random()>i.samplingRate)){var n=d(e);Math.abs(n.x-i.lastMoveX)<i.minMoveDistance&&Math.abs(n.y-i.lastMoveY)<i.minMoveDistance||(i.lastMoveTime=t,i.lastMoveX=n.x,i.lastMoveY=n.y,p("move",n.x,n.y))}},{passive:!0}),t.addEventListener("click",function(e){var t=d(e);p("click",t.x,t.y,function(e){if(!(e instanceof Element))return"";for(var t=[];e.nodeType===Node.ELEMENT_NODE;){var n=e.nodeName.toLowerCase();if(e.id){t.unshift(n+"#"+e.id);break}for(var a=e,i=1;a=a.previousElementSibling;)a.nodeName.toLowerCase()===n&&i++;1!==i&&(n+=":nth-of-type("+i+")"),t.unshift(n),e=e.parentNode}return t.join(" > ")}(e.target))}),setInterval(u,i.flushInterval),e.addEventListener("beforeunload",function(){0!==i.buffer.length&&(navigator.sendBeacon(a.apiHost+"/api/v1/heatmaps/record",new Blob([JSON.stringify({website_id:a.websiteId,points:i.buffer})],{type:"application/json"})),i.buffer=[])}),t.addEventListener("visibilitychange",function(){"hidden"===t.visibilityState&&u()});var v=history.pushState,g=history.replaceState,m=function(){var t=h(e.location.pathname);t!==h(new URL(i.lastUrl).pathname)&&(u(),i.lastUrl=e.location.href,l>0&&(i.enabled=r.includes(t)||r.length<l),i.enabled&&(r.includes(t)||r.push(t),p("pageview",0,0)))};history.pushState=function(){v.apply(this,arguments),m()},history.replaceState=function(){g.apply(this,arguments),m()},e.addEventListener("popstate",m)}}}}(window,document);