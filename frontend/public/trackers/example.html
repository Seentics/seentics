<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seentics Tracking - Example</title>
  
  <!-- Seentics Tracking Scripts (New Consolidated Version) -->
  <!-- Core is required, load modules as needed -->
  <script src="/trackers/seentics-core.js" data-website-id="YOUR_WEBSITE_ID" data-debug="true"></script>
  <script src="/trackers/seentics-analytics.js"></script>
  <script src="/trackers/seentics-automation.js"></script>
  <script src="/trackers/seentics-funnels.js"></script>
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    .section {
      margin-bottom: 40px;
    }
    .section h2 {
      color: #4F46E5;
      margin-bottom: 15px;
      font-size: 20px;
    }
    .button-group {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    button {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-primary {
      background: #4F46E5;
      color: white;
    }
    .btn-primary:hover {
      background: #4338CA;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
    }
    .btn-secondary {
      background: #10B981;
      color: white;
    }
    .btn-secondary:hover {
      background: #059669;
    }
    .btn-tertiary {
      background: #F59E0B;
      color: white;
    }
    .btn-tertiary:hover {
      background: #D97706;
    }
    .info-box {
      background: #EEF2FF;
      border-left: 4px solid #4F46E5;
      padding: 16px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .info-box h3 {
      margin: 0 0 8px;
      color: #4F46E5;
      font-size: 16px;
    }
    .info-box p {
      margin: 0;
      color: #666;
      font-size: 14px;
      line-height: 1.6;
    }
    code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üöÄ Seentics Tracking Demo</h1>
    <p class="subtitle">Test the new consolidated tracking scripts</p>

    <!-- Analytics Section -->
    <div class="section">
      <h2>üìä Analytics Tracking</h2>
      <p>Pageviews, events, and interactions are automatically tracked. Try these custom events:</p>
      <div class="button-group">
        <button class="btn-primary" onclick="trackCustomEvent()">Track Custom Event</button>
        <button class="btn-primary" onclick="trackButtonClick()">Track Button Click</button>
      </div>
      <div class="info-box">
        <h3>Auto-Tracked:</h3>
        <p>‚úì Pageviews &nbsp;‚Ä¢&nbsp; ‚úì Scroll Depth &nbsp;‚Ä¢&nbsp; ‚úì Time on Page &nbsp;‚Ä¢&nbsp; ‚úì Click Events</p>
      </div>
    </div>

    <!-- Automation Section -->
    <div class="section">
      <h2>üéØ Automation & UI Actions</h2>
      <p>Show modals, banners, and notifications:</p>
      <div class="button-group">
        <button class="btn-secondary" onclick="showWelcomeModal()">Show Modal</button>
        <button class="btn-secondary" onclick="showPromoBanner()">Show Banner</button>
        <button class="btn-secondary" onclick="showSuccessNotification()">Show Notification</button>
      </div>
    </div>

    <!-- Funnel Section -->
    <div class="section">
      <h2>üéØ Funnel Tracking</h2>
      <p>Funnels are automatically tracked based on your configuration. Simulate funnel steps:</p>
      <div class="button-group">
        <button class="btn-tertiary" onclick="simulateFunnelStep1()">Step 1: Landing</button>
        <button class="btn-tertiary" onclick="simulateFunnelStep2()">Step 2: Signup</button>
        <button class="btn-tertiary" onclick="simulateFunnelStep3()">Step 3: Conversion</button>
      </div>
      <div class="info-box">
        <h3>Funnel Progress:</h3>
        <p id="funnel-progress">No active funnels</p>
      </div>
    </div>

    <!-- Debug Section -->
    <div class="section">
      <h2>üîç Debug Info</h2>
      <div class="info-box">
        <h3>Session Information:</h3>
        <p id="debug-info">Loading...</p>
      </div>
    </div>
  </div>

  <script>
    // Wait for core to be ready
    SEENTICS_CORE.on('core:ready', () => {
      console.log('‚úÖ Seentics Core Ready');
      updateDebugInfo();
    });

    // Update debug info
    function updateDebugInfo() {
      const info = document.getElementById('debug-info');
      const state = SEENTICS_CORE.state;
      info.innerHTML = `
        <strong>Visitor ID:</strong> <code>${state.visitorId}</code><br>
        <strong>Session ID:</strong> <code>${state.sessionId}</code><br>
        <strong>Page View ID:</strong> <code>${seentics.analytics?.getPageViewId() || 'N/A'}</code><br>
        <strong>Time on Page:</strong> ${seentics.analytics?.getTimeOnPage() || 0}s<br>
        <strong>Scroll Depth:</strong> ${seentics.analytics?.getScrollDepth() || 0}%
      `;
    }

    // Update debug info every second
    setInterval(updateDebugInfo, 1000);

    // Analytics Examples
    function trackCustomEvent() {
      seentics.analytics.track('button_clicked', {
        button_name: 'custom_event_button',
        location: 'demo_page',
        timestamp: new Date().toISOString()
      });
      alert('‚úÖ Custom event tracked! Check console.');
    }

    function trackButtonClick() {
      seentics.analytics.track('demo_interaction', {
        action: 'click',
        element: 'track_button_click'
      });
      alert('‚úÖ Button click tracked!');
    }

    // Automation Examples
    function showWelcomeModal() {
      seentics.automation.showModal({
        title: 'üéâ Welcome to Seentics!',
        content: 'This is a beautiful modal powered by our automation system. You can customize everything!',
        primaryButton: 'Get Started',
        secondaryButton: 'Learn More'
      });
    }

    function showPromoBanner() {
      seentics.automation.showBanner({
        content: 'üéÅ Special Offer: Get 50% off on all premium plans! Limited time only.',
        icon: 'üéâ',
        position: 'bottom',
        backgroundColor: '#10B981',
        textColor: '#FFFFFF',
        duration: 10
      });
    }

    function showSuccessNotification() {
      seentics.automation.showNotification({
        title: 'Success!',
        message: 'This is a success notification. Perfect for confirmations!',
        type: 'success',
        position: 'top',
        duration: 5
      });
    }

    // Funnel Examples
    function simulateFunnelStep1() {
      seentics.analytics.track('funnel_step_1', { step: 'landing' });
      alert('‚úÖ Funnel Step 1 tracked: Landing Page');
      updateFunnelProgress();
    }

    function simulateFunnelStep2() {
      seentics.analytics.track('funnel_step_2', { step: 'signup' });
      alert('‚úÖ Funnel Step 2 tracked: Signup');
      updateFunnelProgress();
    }

    function simulateFunnelStep3() {
      seentics.analytics.track('funnel_step_3', { step: 'conversion' });
      alert('‚úÖ Funnel Step 3 tracked: Conversion!');
      updateFunnelProgress();
    }

    function updateFunnelProgress() {
      const progressEl = document.getElementById('funnel-progress');
      const progress = seentics.funnel?.getAllProgress();
      
      if (progress && Object.keys(progress).length > 0) {
        progressEl.innerHTML = Object.entries(progress)
          .map(([id, data]) => `
            <strong>Funnel ${id}:</strong> Step ${data.currentStep} 
            (${data.completedSteps.length} steps completed)
          `).join('<br>');
      } else {
        progressEl.textContent = 'No active funnels (create funnels in dashboard)';
      }
    }

    // Listen to events
    SEENTICS_CORE.on('analytics:event', (data) => {
      console.log('üìä Event tracked:', data);
    });

    SEENTICS_CORE.on('automation:action', (data) => {
      console.log('üéØ Automation action:', data);
    });

    SEENTICS_CORE.on('funnel:progress', (data) => {
      console.log('üéØ Funnel progress:', data);
      updateFunnelProgress();
    });
  </script>
</body>
</html>
